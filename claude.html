<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Educational Drum Machine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        #playBtn {
            background: #4CAF50;
            color: white;
        }

        #playBtn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        #playBtn.playing {
            background: #f44336;
        }

        #clearBtn {
            background: #ff9800;
            color: white;
        }

        #clearBtn:hover {
            background: #e68900;
            transform: translateY(-2px);
        }

        label {
            font-weight: 600;
            color: #333;
        }

        input[type="range"] {
            width: 120px;
        }

        .sequencer {
            margin-bottom: 30px;
        }

        .drum-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }

        .drum-label {
            width: 100px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .steps {
            display: flex;
            gap: 8px;
            flex: 1;
        }

        .step {
            width: 40px;
            height: 40px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .step:hover {
            background: #f0f0f0;
            transform: scale(1.05);
        }

        .step.active {
            background: #667eea;
            border-color: #667eea;
        }

        .step.playing {
            background: #ffd700;
            border-color: #ffd700;
            transform: scale(1.1);
        }

        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
        }

        .info-box h3 {
            color: #667eea;
            margin-bottom: 8px;
        }

        .info-box p {
            color: #555;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .step {
                width: 30px;
                height: 30px;
            }

            .drum-label {
                width: 80px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü•Å Drum Machine</h1>
        <p class="subtitle">Click the squares to create beats!</p>

        <div class="controls">
            <button id="playBtn">‚ñ∂ Play</button>
            <button id="clearBtn">Clear</button>
            <div class="control-group">
                <label for="tempo">BPM:</label>
                <input type="range" id="tempo" min="60" max="180" value="120">
                <span id="tempoValue">120</span>
            </div>
        </div>

        <div class="sequencer" id="sequencer"></div>

        <div class="info-box">
            <h3>How to Use:</h3>
            <p>
                <strong>Click squares</strong> to activate drum hits on that beat. 
                <strong>Press Play</strong> to hear your pattern loop. 
                <strong>Adjust BPM</strong> to change the speed. 
                Each row represents a different drum sound: kick drum (bass), snare, hi-hat, and clap. 
                Experiment with different patterns to create your own rhythms!
            </p>
        </div>
    </div>

    <script>
        // Audio context setup
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // Drum sounds data
        const drums = [
            { name: 'Kick', frequency: 150, type: 'kick' },
            { name: 'Snare', frequency: 200, type: 'snare' },
            { name: 'Hi-Hat', frequency: 10000, type: 'hihat' },
            { name: 'Clap', frequency: 1000, type: 'clap' }
        ];

        const steps = 16;
        let currentStep = 0;
        let isPlaying = false;
        let intervalId = null;
        let tempo = 120;

        // Grid state
        const grid = drums.map(() => Array(steps).fill(false));

        // Create sequencer UI
        const sequencer = document.getElementById('sequencer');
        drums.forEach((drum, drumIndex) => {
            const row = document.createElement('div');
            row.className = 'drum-row';
            
            const label = document.createElement('div');
            label.className = 'drum-label';
            label.textContent = drum.name;
            row.appendChild(label);

            const stepsContainer = document.createElement('div');
            stepsContainer.className = 'steps';
            
            for (let i = 0; i < steps; i++) {
                const step = document.createElement('div');
                step.className = 'step';
                step.dataset.drum = drumIndex;
                step.dataset.step = i;
                step.addEventListener('click', toggleStep);
                stepsContainer.appendChild(step);
            }
            
            row.appendChild(stepsContainer);
            sequencer.appendChild(row);
        });

        // Toggle step
        function toggleStep(e) {
            const drumIndex = parseInt(e.target.dataset.drum);
            const stepIndex = parseInt(e.target.dataset.step);
            grid[drumIndex][stepIndex] = !grid[drumIndex][stepIndex];
            e.target.classList.toggle('active');
        }

        // Play sound
        function playSound(drumType) {
            const drum = drums.find(d => d.type === drumType);
            const osc = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            osc.connect(gainNode);
            gainNode.connect(audioContext.destination);

            if (drumType === 'kick') {
                osc.frequency.setValueAtTime(150, audioContext.currentTime);
                osc.frequency.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                gainNode.gain.setValueAtTime(1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                osc.start(audioContext.currentTime);
                osc.stop(audioContext.currentTime + 0.5);
            } else if (drumType === 'snare') {
                const noise = audioContext.createBufferSource();
                const bufferSize = audioContext.sampleRate * 0.2;
                const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
                const data = buffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = Math.random() * 2 - 1;
                }
                noise.buffer = buffer;
                
                const noiseGain = audioContext.createGain();
                noise.connect(noiseGain);
                noiseGain.connect(audioContext.destination);
                noiseGain.gain.setValueAtTime(0.3, audioContext.currentTime);
                noiseGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                
                noise.start(audioContext.currentTime);
                noise.stop(audioContext.currentTime + 0.2);
            } else if (drumType === 'hihat') {
                const noise = audioContext.createBufferSource();
                const bufferSize = audioContext.sampleRate * 0.05;
                const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
                const data = buffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = Math.random() * 2 - 1;
                }
                noise.buffer = buffer;
                
                const filter = audioContext.createBiquadFilter();
                filter.type = 'highpass';
                filter.frequency.value = 7000;
                
                const noiseGain = audioContext.createGain();
                noise.connect(filter);
                filter.connect(noiseGain);
                noiseGain.connect(audioContext.destination);
                noiseGain.gain.setValueAtTime(0.2, audioContext.currentTime);
                noiseGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
                
                noise.start(audioContext.currentTime);
                noise.stop(audioContext.currentTime + 0.05);
            } else if (drumType === 'clap') {
                const noise = audioContext.createBufferSource();
                const bufferSize = audioContext.sampleRate * 0.1;
                const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
                const data = buffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = Math.random() * 2 - 1;
                }
                noise.buffer = buffer;
                
                const noiseGain = audioContext.createGain();
                noise.connect(noiseGain);
                noiseGain.connect(audioContext.destination);
                noiseGain.gain.setValueAtTime(0.4, audioContext.currentTime);
                noiseGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                
                noise.start(audioContext.currentTime);
                noise.stop(audioContext.currentTime + 0.1);
            }
        }

        // Step through sequence
        function step() {
            // Remove playing class from previous step
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('playing');
            });

            // Play sounds for active steps
            drums.forEach((drum, drumIndex) => {
                if (grid[drumIndex][currentStep]) {
                    playSound(drum.type);
                }
                
                // Add playing class to current step
                const stepElement = document.querySelector(`[data-drum="${drumIndex}"][data-step="${currentStep}"]`);
                if (stepElement && grid[drumIndex][currentStep]) {
                    stepElement.classList.add('playing');
                }
            });

            // Highlight current column
            document.querySelectorAll(`[data-step="${currentStep}"]`).forEach(step => {
                step.style.borderColor = '#667eea';
                step.style.borderWidth = '3px';
            });

            setTimeout(() => {
                document.querySelectorAll(`[data-step="${currentStep}"]`).forEach(step => {
                    step.style.borderColor = '';
                    step.style.borderWidth = '';
                });
            }, 100);

            currentStep = (currentStep + 1) % steps;
        }

        // Play/Stop
        document.getElementById('playBtn').addEventListener('click', () => {
            isPlaying = !isPlaying;
            const btn = document.getElementById('playBtn');
            
            if (isPlaying) {
                btn.textContent = '‚è∏ Stop';
                btn.classList.add('playing');
                const interval = (60 / tempo) * 1000 / 4; // 16th notes
                intervalId = setInterval(step, interval);
            } else {
                btn.textContent = '‚ñ∂ Play';
                btn.classList.remove('playing');
                clearInterval(intervalId);
                currentStep = 0;
                document.querySelectorAll('.step').forEach(step => {
                    step.classList.remove('playing');
                });
            }
        });

        // Clear
        document.getElementById('clearBtn').addEventListener('click', () => {
            grid.forEach(row => row.fill(false));
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
        });

        // Tempo control
        const tempoSlider = document.getElementById('tempo');
        const tempoValue = document.getElementById('tempoValue');
        
        tempoSlider.addEventListener('input', (e) => {
            tempo = parseInt(e.target.value);
            tempoValue.textContent = tempo;
            
            if (isPlaying) {
                clearInterval(intervalId);
                const interval = (60 / tempo) * 1000 / 4;
                intervalId = setInterval(step, interval);
            }
        });
    </script>
</body>
</html>
